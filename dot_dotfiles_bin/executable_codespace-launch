#!/bin/bash

NAME=$1
echo "Opening codespace $NAME"
gh cs code --codespace $NAME --insiders
# Copy auth details for atuin
gh cs ssh --codespace $NAME "echo 'atuin login -u $(op read "op://Personal/Atuin/username") -p $(op read "op://Personal/Atuin/password") --key \"$(op read "op://Personal/Atuin/key")\"' > ~/.atuinrc"
#                                                                                  atuin server               languagetool grammer/spellcheck
kitty bash -c "export TERM=xterm-256color; gh codespace ssh --codespace $NAME -- -R 3123:100.102.135.78:80 -R 8123:localhost:8123"